notifications:
  email: false
  slack:
    rooms:
    - secure: 0LNVt+KHXnPhofPtPHYagTQGJyy5HT1Be+vhApSB3filEiXW7JRVYL6Z9nscuE6AbzOFRVdwdhxgvlb41ZtA8dv4w+Wz2gzW7PBvWSW2LYgv/s1fNVifH9+2BJztjLU/f6DcTvCkkft9HgBaASgOZgIG9wjvd/gkTbyz0rhg3iFmhhRl66GDA1zFNwXRUmKMxBKN8eIq8X/P1cpyJOonr6Gx0iJ5DmJSCalnTnWjrVt7BrO1Y2Xf82D0qDMmFWAKIEtrDkFEDiDrewF0pY5xws0LKY06SwlJAfJaM2wZM9T+eWf9lzeZ0rhiw/qb9RY6ofnN8pC5btx2R0HkNah8PlRfWio/Jmz3kqNEoP5dABapeDtGCf2xDv3lti8InVRK5NsBedsu4sE0Kc9ofC4gZdZvnz3kLNfwdTmqlN8Kc/uapxHGkjuhB8SgYIKwzIMD6jiQx7IkHv8EYyAOPbSyDuP6pSXIXzntOQlJCVbGGLe1jnLep6+9urtB0+gcuwrz27aGhztuUfADdsCCF7lyMAnySM9X0oZpdhnTN/4nRfz0yuZZcm++ctn7QlG/Mfjv3IprxA75biejC4mnaPDZMqbjDkYHpx8N/dGhlCmqliT0vWI2fCeZ8zxo+KeoSqAcAhgVWo9vbTc8qkKf1XF220asnVwRKLcOy7pwn+j8HTs=   
    on_success: change # default: always
    on_failure: always # default: always
    template:
      - "Repo `%{repository_slug}` *%{result}* build (<%{build_url}|#%{build_number}>) for commit (<%{compare_url}|%{commit}>) on branch `%{branch}`."
      - "Execution time: *%{duration}*"
      - "Message: %{message}"

language: generic
env:
  global:
  - access_key_id: "$AWS_ACCESS_KEY_ID"
  - secret_access_key: "$AWS_SECRET_ACCESS_KEY"
before_deploy:
- curl -fSL "https://releases.hashicorp.com/terraform/0.11.3/terraform_0.11.3_linux_amd64.zip"
  -o terraform.zip
- sudo unzip terraform.zip -d /opt/terraform
- sudo ln -s /opt/terraform/terraform /usr/bin/terraform
- rm -f terraform.zip
deploy:
- provider: script
  skip_cleanup: true
  script: "./deploy.sh"
  on:
    repo: cjbischoff/tf-aws-account
    branch: master